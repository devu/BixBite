//723 bytes gzipped (1.9KB uncompressed)
var Display={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE",DATA_REQUEST:"DisplayManager.DATA_REQUEST",RESIZE:"DisplayManager.RESIZE",SET_DISPLAY:"DisplaySignal.SET_DISPLAY",GET_DISPLAY:"DisplaySignal.GET_DISPLAY",ON_ORIENTATION_CHANGED:"DisplaySignal.ON_ORIENTATION_CHANGED",ON_RESIZE:"DisplaySignal.ON_RESIZE"};DisplayManager.extend(Compound); function DisplayManager(){function d(){this.orientation=Display.PORTRAIT;this.root=null;this.init=function(){this.addSlot(Display.DATA_REQUEST,b);this.addSlot(Display.SET_DISPLAY,a)};var b=function(a){this.responseTo(a.callerUID,Display.DATA_REQUEST)},a=function(a){this.root=a.params.root;this.frameRate=a.params.frameRate;this.responseToAll(Display.DATA_REQUEST)}}function f(){this.init=function(){this.transmit(Display.GET_DISPLAY)}}function g(){this.init=function(){};this.execute=function(b){var a= {root:null,align:"TL",scaleMode:"noScale",frameRate:30};if(b.params)for(var c in b.params)a[c]=b.params[c];this.sendRequest(Display.SET_DISPLAY,a)}}function h(){var b,a;this.init=function(){this.addResponder(Display.DATA_REQUEST,c)};var c=function(e){a=e;b=e.root;e.orientation=b.width<=b.height?Display.PORTRAIT:Display.LANDSCAPE;var c=this;window.onresize=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return d.apply(c,arguments)}},d=function(a){this.execute(null)};this.execute=function(c){a.orientation!= (b.width<=b.height?Display.PORTRAIT:Display.LANDSCAPE)&&(a.orientation=currentOrientation,emitSignal(Display.ON_ORIENTATION_CHANGED,a),sendSignal(Display.ON_ORIENTATION_CHANGED,a));this.emitSignal(Display.ON_RESIZE,a);this.sendSignal(Display.ON_RESIZE,a)}}this.init=function(){this.register(d);this.register(f);this.addBehaviour(Display.SET_DISPLAY,g);this.addBehaviour(Display.RESIZE,h)};p=d.extend(Data);p.width=function(){return this.stage.stageWidth};p.height=function(){return this.stage.stageHeight}; p=f.extend(Transponder);p=g.extend(Behaviour);p=h.extend(Behaviour)};